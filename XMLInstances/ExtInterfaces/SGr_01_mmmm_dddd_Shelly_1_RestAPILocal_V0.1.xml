<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/SGr.xsl"?>
<DeviceFrame xmlns="http://www.smartgridready.com/ns/V0/"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.smartgridready.com/ns/V0/ ../../SchemaDatabase/SGr/Product/Product.xsd">
	<deviceName>Shelly 1 Local</deviceName>
	<manufacturerName>Shelly</manufacturerName>
	<specificationOwnerIdentification>0</specificationOwnerIdentification>
	<releaseNotes>
		<state>Draft</state>
		<changeLog>
			<version>0.1.0</version>
			<date>2024-06-18</date>
			<author>Matthias Krebs, FHNW</author>
			<comment>Draft for Testlab</comment>
		</changeLog>
	</releaseNotes>
	<deviceInformation>
		<legibleDescription>
			<textElement>
				<![CDATA[ 
          Der Shelly 1 ist ein 1-kanaliges schaltbares Relais.
          Die vorliegende EID ist auf die Ansteuerung via lokalem REST API ausgelegt.
        ]]>
			</textElement>
			<language>de</language>
			<uri>https://www.shelly.com/de-ch/products/product-overview/shelly-1</uri>
		</legibleDescription>
		<deviceCategory>SubMeterElectricity</deviceCategory>
		<isLocalControl>true</isLocalControl>
		<softwareRevision>1.0.0</softwareRevision>
		<hardwareRevision>1.0.0</hardwareRevision>
		<manufacturerSpecificationIdentification>Shelly</manufacturerSpecificationIdentification>
		<levelOfOperation>1m</levelOfOperation>
		<versionNumber>
			<primaryVersionNumber>0</primaryVersionNumber>
			<secondaryVersionNumber>1</secondaryVersionNumber>
			<subReleaseVersionNumber>0</subReleaseVersionNumber>
		</versionNumber>
	</deviceInformation>
	<configurationList>
		<configurationListElement>
			<name>baseUri</name>
			<dataType>
				<string/>
			</dataType>
			<configurationDescription>
				<textElement>Base address for accessing the resource.</textElement>
				<language>en</language>
				<label>Base URI</label>
			</configurationDescription>
			<configurationDescription>
				<textElement>Basis-Adresse f√ºr Zugriffe auf die Ressource.</textElement>
				<language>de</language>
				<label>Basis URI</label>
			</configurationDescription>
		</configurationListElement>
	</configurationList>
	<interfaceList>
		<restApiInterface>
			<restApiInterfaceDescription>
				<restApiInterfaceSelection>URI</restApiInterfaceSelection>
				<restApiUri>{{baseUri}}</restApiUri>
				<restApiAuthenticationMethod>NoSecurityScheme</restApiAuthenticationMethod>
			</restApiInterfaceDescription>
			<functionalProfileList>
				<functionalProfileListElement>
					<functionalProfile>
						<functionalProfileName>Relais</functionalProfileName>
						<functionalProfileIdentification>
							<specificationOwnerIdentification>0</specificationOwnerIdentification>
							<functionalProfileCategory>Actuator</functionalProfileCategory>
							<functionalProfileType>Relais</functionalProfileType>
							<levelOfOperation>1m</levelOfOperation>
							<versionNumber>
								<primaryVersionNumber>0</primaryVersionNumber>
								<secondaryVersionNumber>1</secondaryVersionNumber>
								<subReleaseVersionNumber>0</subReleaseVersionNumber>
							</versionNumber>
						</functionalProfileIdentification>
						<legibleDescription>
							<textElement>Relais ein- oder ausschalten.</textElement>
							<language>de</language>
						</legibleDescription>
						<legibleDescription>
							<textElement>Switch relay on or off.</textElement>
							<language>en</language>
						</legibleDescription>
					</functionalProfile>
					<dataPointList>
						<dataPointListElement>
							<dataPoint>
								<dataPointName>Relais</dataPointName>
								<dataDirection>RW</dataDirection>
								<dataType>
									<boolean/>
								</dataType>
								<unit>NONE</unit>
								<legibleDescription>
									<textElement>Relais-Status</textElement>
									<language>de</language>
								</legibleDescription>
								<legibleDescription>
									<textElement>Relay state</textElement>
									<language>en</language>
								</legibleDescription>
							</dataPoint>
							<restApiDataPointConfiguration>
								<dataType>JSON_boolean</dataType>
								<restApiReadServiceCall>
									<requestHeader>
										<header>
											<headerName>Accept</headerName>
											<value>application/json</value>
										</header>
									</requestHeader>
									<requestMethod>GET</requestMethod>
									<requestPath>/relay/0</requestPath>
									<responseQuery>
										<queryType>JMESPathExpression</queryType>
										<query>ison</query>
									</responseQuery>
								</restApiReadServiceCall>
								<restApiWriteServiceCall>
									<requestHeader>
										<header>
											<headerName>Accept</headerName>
											<value>application/json</value>
										</header>
									</requestHeader>
									<requestMethod>GET</requestMethod>
									<requestPath>/relay/0</requestPath>
									<requestQuery>
										<parameter>
											<name>turn</name>
											<value>{{value}}</value>
										</parameter>
									</requestQuery>
									<responseQuery>
										<queryType>JMESPathExpression</queryType>
										<query>ison</query>
									</responseQuery>
									<valueMapping>
										<mapping>
											<genericValue>false</genericValue>
											<deviceValue>off</deviceValue>
										</mapping>
										<mapping>
											<genericValue>true</genericValue>
											<deviceValue>on</deviceValue>
										</mapping>
									</valueMapping>
								</restApiWriteServiceCall>
							</restApiDataPointConfiguration>
						</dataPointListElement>
					</dataPointList>
				</functionalProfileListElement>
			</functionalProfileList>
		</restApiInterface>
	</interfaceList>
</DeviceFrame>